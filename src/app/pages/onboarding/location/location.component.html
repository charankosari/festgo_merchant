<div class="onboarding-form-container">
  <div class="form-header">
    <h2 class="section-title">{{ formData.sectionTitle }}</h2>
    <p class="section-subtitle">{{ formData.sectionSubtitle }}</p>
  </div>

  <form [formGroup]="locationForm" (ngSubmit)="onSubmit()" class="location-form">
    <div class="form-row search-row">
      <div class="form-field search-field">
        <input 
          type="text" 
          id="searchLocation" 
          formControlName="searchLocation" 
          placeholder="Search for a location" 
          class="search-input"
        >
        <button 
          type="button" 
          class="current-location-btn" 
          (click)="getCurrentLocation()"
        >
          <i class="pi pi-map-marker"></i> Use My Current Location
        </button>
      </div>
    </div>

    <div class="form-row map-row">
      <div class="map-container">
        <div id="map" class="map"></div>
        <p class="map-instruction">Drag the marker to adjust the exact location</p>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label for="houseNumber">House/Building/Apartment No. <span class="required">*</span></label>
        <input 
          type="text" 
          id="houseNumber" 
          formControlName="houseNumber" 
          placeholder="Enter house/building/apartment no."
          [ngClass]="{'invalid': locationForm.get('houseNumber')?.invalid && locationForm.get('houseNumber')?.touched}"
        >
        <small *ngIf="locationForm.get('houseNumber')?.invalid && locationForm.get('houseNumber')?.touched" class="error-message">
          House/Building/Apartment No. is required
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field">
        <label for="locality">Locality/Area/Street/Sector <span class="required">*</span></label>
        <input 
          type="text" 
          id="locality" 
          formControlName="locality" 
          placeholder="Enter area/street/locality"
          [ngClass]="{'invalid': locationForm.get('locality')?.invalid && locationForm.get('locality')?.touched}"
        >
        <small *ngIf="locationForm.get('locality')?.invalid && locationForm.get('locality')?.touched" class="error-message">
          Locality/Area/Street/Sector is required
        </small>
      </div>
    </div>

    <div class="form-row two-column">
      <div class="form-field">
        <label for="pincode">Pincode <span class="required">*</span></label>
        <input 
          type="text" 
          id="pincode" 
          formControlName="pincode" 
          placeholder="Enter pincode"
          [ngClass]="{'invalid': locationForm.get('pincode')?.invalid && locationForm.get('pincode')?.touched}"
        >
        <small *ngIf="locationForm.get('pincode')?.invalid && locationForm.get('pincode')?.touched" class="error-message">
          Pincode is required
        </small>
      </div>
      <div class="form-field">
        <label for="country">Country <span class="required">*</span></label>
        <input 
          type="text" 
          id="country" 
          formControlName="country" 
          placeholder="Enter country"
          [ngClass]="{'invalid': locationForm.get('country')?.invalid && locationForm.get('country')?.touched}"
        >
        <small *ngIf="locationForm.get('country')?.invalid && locationForm.get('country')?.touched" class="error-message">
          Country is required
        </small>
      </div>
    </div>

    <div class="form-row two-column">
      <div class="form-field">
        <label for="state">State <span class="required">*</span></label>
        <input 
          type="text" 
          id="state" 
          formControlName="state" 
          placeholder="Enter state"
          [ngClass]="{'invalid': locationForm.get('state')?.invalid && locationForm.get('state')?.touched}"
        >
        <small *ngIf="locationForm.get('state')?.invalid && locationForm.get('state')?.touched" class="error-message">
          State is required
        </small>
      </div>
      <div class="form-field">
        <label for="city">City <span class="required">*</span></label>
        <input 
          type="text" 
          id="city" 
          formControlName="city" 
          placeholder="Enter city"
          [ngClass]="{'invalid': locationForm.get('city')?.invalid && locationForm.get('city')?.touched}"
        >
        <small *ngIf="locationForm.get('city')?.invalid && locationForm.get('city')?.touched" class="error-message">
          City is required
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field checkbox-field">
        <div class="checkbox-container">
          <input 
            type="checkbox" 
            id="acceptTerms" 
            formControlName="acceptTerms"
            [ngClass]="{'invalid': locationForm.get('acceptTerms')?.invalid && locationForm.get('acceptTerms')?.touched}"
          >
          <label for="acceptTerms" class="checkbox-label">
            I agree to the <a href="/terms" target="_blank">terms and conditions</a> and confirm the address provided here is as per the registration or lease document.
          </label>
        </div>
        <small *ngIf="locationForm.get('acceptTerms')?.invalid && locationForm.get('acceptTerms')?.touched" class="error-message">
          You must accept the terms and conditions
        </small>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-back" (click)="onBack()">
        <i class="pi pi-arrow-left"></i> Back
      </button>
      <button type="submit" class="btn-primary" [disabled]="isSubmitting">
        <span *ngIf="!isSubmitting" (click)="onSubmit()">Save And Continue</span>
        <span *ngIf="isSubmitting">Saving...</span>
      </button>
    </div>

    <!-- <div class="form-actions">
      <button type="button" class="btn-back" (click)="onBack()">
        <i class="pi pi-arrow-left"></i> Back
      </button>
      <button type="submit" class="btn-primary" [disabled]="isSubmitting">
        <span *ngIf="!isSubmitting">Save And Continue</span>
        <span *ngIf="isSubmitting">Saving...</span>
      </button>
    </div> -->
  </form>
</div>

<!-- Google Maps API Script -->
<!-- <script>
  // This is a placeholder for the Google Maps API script
  // In a real application, you would include the actual Google Maps API script with your API key
  // Example: <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
</script> -->
